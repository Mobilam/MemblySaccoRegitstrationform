<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Membly SACCO Registration Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- js link -->
   <script src="script.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container my-5">
    <h1 class="text-center mb-4">Membly Neighbourhood SACCO - Membership Registration</h1>

    <form id="saccoForm" action="#" method="POST" enctype="multipart/form-data">

      <!-- Application Section -->
      <div class="card mb-4">
        <div class="card-header">1. Application for Membership</div>
        <div class="card-body row g-3">

          <div class="col-md-6">
            <label class="form-label">Date of Application</label>
            <input type="date" class="form-control" name="application_date" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Full Name</label>
            <div class="input-group">
              <select class="form-select" name="title">
                <option>Mr.</option>
                <option>Mrs.</option>
                <option>Miss</option>
              </select>
              <input type="text" class="form-control" name="fullname" placeholder="Enter full name" required>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label">Date of Birth</label>
            <input type="date" class="form-control" name="dob" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">ID Number</label>
            <input type="text" class="form-control" name="id_number" required>
          </div>

          <div class="col-12">
            <label class="form-label">Present Postal Address</label>
            <textarea class="form-control" name="postal_address" rows="2" required></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label">Phone Number</label>
            <input type="tel" class="form-control" name="phone" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Home Physical Address</label>
            <textarea class="form-control" name="home_address" rows="2" required></textarea>
          </div>

        </div>
      </div>

      <!-- Next of Kin -->
      <div class="card mb-4">
        <div class="card-header">2. Nominated Next of Kin</div>
        <div class="card-body row g-3">

          <div class="col-md-6">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-control" name="next_of_kin_name" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Relationship to Applicant</label>
            <input type="text" class="form-control" name="relationship" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Next of Kin ID Number</label>
            <input type="text" class="form-control" name="next_of_kin_id" required>
          </div>

          <div class="col-12">
            <label class="form-label">Address of Next of Kin</label>
            <textarea class="form-control" name="next_of_kin_address" rows="2" required></textarea>
          </div>

          <div class="col-md-6">
            <label class="form-label">Witness Name</label>
            <input type="text" class="form-control" name="witness_name" required>
          </div>

          <div class="col-md-6">
            <label class="form-label">Witness Signature</label>
            <div style="border:1px solid #ccc; padding:8px; border-radius:4px; background:#fafafa;">
              <canvas class="signature-pad" width="300" height="80" style="border:1px solid #888; background:#fff; display:block;"></canvas>
              <button type="button" class="btn btn-sm btn-secondary mt-2 clear-signature">Clear</button>
              <input type="hidden" name="witness_signature" class="signature-data" required>
              <small class="text-muted">Sign above</small>
            </div>
          </div>

          <div class="col-12">
            <label class="form-label">Applicant Signature</label>
            <div style="border:1px solid #ccc; padding:8px; border-radius:4px; background:#fafafa;">
              <canvas class="signature-pad" width="300" height="80" style="border:1px solid #888; background:#fff; display:block;"></canvas>
              <button type="button" class="btn btn-sm btn-secondary mt-2 clear-signature">Clear</button>
              <input type="hidden" name="applicant_signature_2" class="signature-data" required>
              <small class="text-muted">Sign above</small>
            </div>
          </div>

        </div>
      </div>

      <!-- Payment Info -->
      <div class="card mb-4">
        <div class="card-header">3. Bank Payment Info</div>
        <div class="card-body">
          <p><strong>Bank Account:</strong> Membly Neighbourhood SACCO</p>
          <p><strong>Account No:</strong> 01100576234000</p>
          <p><strong>Lipa na Mpesa:</strong> Paybill 400222, Account: 131555#yourname</p>
        </div>
      </div>

      <!-- Admin Use -->
      <div class="card mb-4">
        <div class="card-header">4. For Official Use Only</div>
        <div class="card-body row g-3">

          <div class="col-md-6">
            <label class="form-label">Approved By</label>
            <input type="text" class="form-control" name="approved_by">
          </div>

          <div class="col-md-6">
            <label class="form-label">Signature</label>
            <div style="border:1px solid #ccc; padding:8px; border-radius:4px; background:#fafafa;">
              <canvas class="signature-pad" width="300" height="80" style="border:1px solid #888; background:#fff; display:block;"></canvas>
              <button type="button" class="btn btn-sm btn-secondary mt-2 clear-signature">Clear</button>
              <input type="hidden" name="official_signature" class="signature-data">
              <small class="text-muted">Sign above</small>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label">Date of Approval</label>
            <input type="date" class="form-control" name="approval_date">
          </div>

          <!-- footer -->
          <div class="col-12 text-center mt-4">
            <button type="submit" class="btn btn-primary">Submit Application</button>
          </div>
  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom JS -->
  <script src="script.js"></script>
</body>
</html>
<script>
  document.getElementById("saccoForm").addEventListener("submit", function(event) {
    // Save all signature pads to hidden inputs
    document.querySelectorAll('.signature-pad').forEach(function(canvas) {
      var dataUrl = canvas.toDataURL();
      var input = canvas.parentElement.querySelector('.signature-data');
      if (input) input.value = dataUrl;
    });
    // Optionally, validate that signature is not blank
    let valid = true;
    document.querySelectorAll('.signature-data[required]').forEach(function(input) {
      if (!input.value || input.value.length < 100) valid = false;
    });
    if (!valid) {
      event.preventDefault();
      alert('Please provide all required signatures.');
      return;
    }
    // Continue with submission
    alert("Thank you! Your application has been recorded.");
    // Here you can plug in logic to send data via Fetch API or form service
  });